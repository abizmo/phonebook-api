(this.webpackJsonpphonelist=this.webpackJsonpphonelist||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),u=n(14),a=n.n(u),o=n(3),s=n(0),i=function(e){var t=e.changeFilter,n=e.filter;return Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"filter",children:"filter shown with"}),Object(s.jsx)("input",{type:"text",name:"filter",value:n,onChange:function(e){return t(e.target.value)}})]})},l=function(e){var t=e.message,n=e.error;return t?Object(s.jsx)("div",{className:n?"error":"success",children:t}):null},d=function(e){var t=e.onSubmit,n=Object(r.useState)(""),c=Object(o.a)(n,2),u=c[0],a=c[1],i=Object(r.useState)(""),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t({name:u,number:d}),a(""),j("")},children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:u,onChange:function(e){return a(e.target.value)}})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:d,onChange:function(e){return j(e.target.value)}})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var t=e.name,n=e.number,r=e.handleDelete;return Object(s.jsx)("li",{children:Object(s.jsxs)("div",{children:[t," - ",n,Object(s.jsx)("button",{onClick:r,children:"delete"})]})})},b=function(e){var t=e.persons,n=e.handleDelete;return Object(s.jsx)("ul",{children:t.map((function(e){var t=e._id,r=e.name,c=e.number;return Object(s.jsx)(j,{name:r,number:c,handleDelete:function(){return n(t)}},t)}))})},h=n(4),f=n.n(h),m="/api/persons",O={getAll:function(){return f.a.get(m).then((function(e){return e.data}))},create:function(e){return f.a.post(m,e).then((function(e){return e.data}))},delete:function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},update:function(e){var t=e.id,n=e.number;return f.a.patch("".concat(m,"/").concat(t),{number:n}).then((function(e){return e.data}))}},g=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(""),a=Object(o.a)(u,2),j=a[0],h=a[1],f=Object(r.useState)({message:"",error:!1}),m=Object(o.a)(f,2),g=m[0],x=m[1],p=n.filter((function(e){return e.name.toLowerCase().includes(j.toLowerCase())}));return Object(r.useEffect)((function(){O.getAll().then((function(e){return c(e)})).catch((function(e){return x({message:e.message,error:!0})}))}),[]),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(l,{message:g.message,error:g.error}),Object(s.jsx)(i,{filter:j,changeFilter:h}),Object(s.jsx)("h3",{children:"Add a new"}),Object(s.jsx)(d,{onSubmit:function(e){var t=e.name,r=e.number,u=function(e){return n.find((function(t){return t.name===e}))}(t);u?window.confirm("".concat(t," is alredy added to phonebook, replace the old number with a new one?"))&&O.update({id:u._id,number:r}).then((function(e){O.getAll().then((function(e){c(e),x({message:"Person updated",error:!1})}))})).catch((function(e){return x({message:e.message,error:!0})})):O.create({name:t,number:r}).then((function(e){c(n.concat(e)),x({message:"Person added",error:!1})})).catch((function(e){return x({message:e.message,error:!0})}))}}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(b,{persons:p,handleDelete:function(e){console.log(e),window.confirm("Are you sure to delete it?")&&O.delete(e).then((function(){c(n.filter((function(t){return t._id!==e}))),x({message:"Person deleted",error:!1})})).catch((function(e){return x({message:e.message,error:!0})}))}})]})};n(38);a.a.render(Object(s.jsxs)(c.a.StrictMode,{children:[console.log("hola"),Object(s.jsx)(g,{})]}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.7eafd287.chunk.js.map